{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Downloads/anonymous-social-platform/lib/firebase.ts"],"sourcesContent":["import { initializeApp, FirebaseApp } from 'firebase/app'\nimport { Auth, getAuth } from 'firebase/auth'\nimport { Firestore, getFirestore } from 'firebase/firestore'\nimport { FirebaseStorage, getStorage } from 'firebase/storage'\nimport { GoogleAuthProvider } from 'firebase/auth'\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"AIzaSyACBv7agfDq3yMs9qdnFQbsnkjmZjNzPWE\",\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"whisplyy.firebaseapp.com\",\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"whisplyy\",\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"whisplyy.appspot.com\",\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"983464337272\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"1:983464337272:web:23bf268b6901c686b0328d\",\n}\n\nlet app: FirebaseApp | null = null\nlet auth: Auth | null = null\nlet db: Firestore | null = null\nlet storage: FirebaseStorage | null = null\nlet isInitialized = false\n\n// Initialize Firebase only on client side\nconst initializeFirebase = () => {\n  if (typeof window === 'undefined') return false\n  if (isInitialized) return true\n\n  try {\n    if (!app) {\n      app = initializeApp(firebaseConfig)\n    }\n    if (!auth) {\n      auth = getAuth(app)\n    }\n    if (!db) {\n      db = getFirestore(app)\n    }\n    if (!storage) {\n      storage = getStorage(app)\n    }\n    isInitialized = true\n    console.log('[v0] Firebase initialized successfully')\n    return true\n  } catch (error: any) {\n    console.error('[v0] Firebase initialization error:', error.message)\n    isInitialized = false\n    return false\n  }\n}\n\n// Lazy getters that ensure initialization\nexport const getAppInstance = (): FirebaseApp | null => {\n  if (!app || !isInitialized) {\n    const initialized = initializeFirebase()\n    if (!initialized) return null\n  }\n  return app\n}\n\nexport const getAuthInstance = (): Auth | null => {\n  if (!auth) {\n    initializeFirebase()\n  }\n  return auth\n}\n\nexport const getDbInstance = (): Firestore | null => {\n  if (!db) {\n    initializeFirebase()\n  }\n  return db\n}\n\nexport const getStorageInstance = (): FirebaseStorage | null => {\n  if (!storage) {\n    initializeFirebase()\n  }\n  return storage\n}\n\nexport { storage as firebaseStorage }\n\n// Lazy provider initialization\nlet googleProviderInstance: GoogleAuthProvider | null = null\n\nexport const getGoogleProvider = (): GoogleAuthProvider => {\n  if (!googleProviderInstance) {\n    try {\n      googleProviderInstance = new GoogleAuthProvider()\n      // Add any additional scopes you need\n      googleProviderInstance.addScope('profile')\n      googleProviderInstance.addScope('email')\n      // Set the authentication method to 'popup' for better mobile support\n      googleProviderInstance.setCustomParameters({\n        prompt: 'select_account',\n      })\n    } catch (error) {\n      console.error('[v0] Error creating Google provider:', error)\n      throw new Error('Failed to initialize Google Sign-In. Please try again later.')\n    }\n  }\n  return googleProviderInstance\n}\n\n// Status check\nexport const isFirebaseReady = (): boolean => {\n  if (typeof window === 'undefined') return false\n  if (!isInitialized) {\n    return initializeFirebase()\n  }\n  return !!app && !!auth && !!db && !!storage\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAOU;AAPV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAGA,MAAM,iBAAiB;IACrB,QAAQ,+EAA4C;IACpD,YAAY,gEAAgD;IAC5D,WAAW,gDAA+C;IAC1D,eAAe,4DAAmD;IAClE,mBAAmB,oDAAwD;IAC3E,OAAO,iFAA2C;AACpD;AAEA,IAAI,MAA0B;AAC9B,IAAI,OAAoB;AACxB,IAAI,KAAuB;AAC3B,IAAI,UAAkC;AACtC,IAAI,gBAAgB;AAEpB,0CAA0C;AAC1C,MAAM,qBAAqB;IACzB;;IACA,IAAI,eAAe,OAAO;IAE1B,IAAI;QACF,IAAI,CAAC,KAAK;YACR,MAAM,IAAA,mSAAa,EAAC;QACtB;QACA,IAAI,CAAC,MAAM;YACT,OAAO,IAAA,4TAAO,EAAC;QACjB;QACA,IAAI,CAAC,IAAI;YACP,KAAK,IAAA,0UAAY,EAAC;QACpB;QACA,IAAI,CAAC,SAAS;YACZ,UAAU,IAAA,qUAAU,EAAC;QACvB;QACA,gBAAgB;QAChB,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uCAAuC,MAAM,OAAO;QAClE,gBAAgB;QAChB,OAAO;IACT;AACF;AAGO,MAAM,iBAAiB;IAC5B,IAAI,CAAC,OAAO,CAAC,eAAe;QAC1B,MAAM,cAAc;QACpB,IAAI,CAAC,aAAa,OAAO;IAC3B;IACA,OAAO;AACT;AAEO,MAAM,kBAAkB;IAC7B,IAAI,CAAC,MAAM;QACT;IACF;IACA,OAAO;AACT;AAEO,MAAM,gBAAgB;IAC3B,IAAI,CAAC,IAAI;QACP;IACF;IACA,OAAO;AACT;AAEO,MAAM,qBAAqB;IAChC,IAAI,CAAC,SAAS;QACZ;IACF;IACA,OAAO;AACT;;AAIA,+BAA+B;AAC/B,IAAI,yBAAoD;AAEjD,MAAM,oBAAoB;IAC/B,IAAI,CAAC,wBAAwB;QAC3B,IAAI;YACF,yBAAyB,IAAI,uUAAkB;YAC/C,qCAAqC;YACrC,uBAAuB,QAAQ,CAAC;YAChC,uBAAuB,QAAQ,CAAC;YAChC,qEAAqE;YACrE,uBAAuB,mBAAmB,CAAC;gBACzC,QAAQ;YACV;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM,IAAI,MAAM;QAClB;IACF;IACA,OAAO;AACT;AAGO,MAAM,kBAAkB;IAC7B;;IACA,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IACA,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;AACtC"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hp/Downloads/anonymous-social-platform/lib/auth-context.tsx"],"sourcesContent":["'use client'\n\nimport React, { createContext, useContext, useState, useEffect } from 'react'\nimport { getAuthInstance, isFirebaseReady } from './firebase'\nimport { onAuthStateChanged, User } from 'firebase/auth'\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  isLoggedIn: boolean\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  loading: true,\n  isLoggedIn: false,\n})\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    if (!isFirebaseReady()) {\n      console.warn('[v0] Firebase not ready in AuthProvider')\n      setLoading(false)\n      return\n    }\n\n    try {\n      const auth = getAuthInstance()\n      if (!auth) {\n        console.warn('[v0] Auth instance not available')\n        setLoading(false)\n        return\n      }\n\n      const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n        setUser(currentUser)\n        setLoading(false)\n      })\n\n      return () => unsubscribe()\n    } catch (error) {\n      console.error('[v0] Error in AuthProvider:', error)\n      setLoading(false)\n    }\n  }, [])\n\n  const value = {\n    user,\n    loading,\n    isLoggedIn: !!user,\n  }\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error('useAuth must be used within AuthProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAAA;;;AAJA;;;;AAYA,MAAM,4BAAc,IAAA,uUAAa,EAAkB;IACjD,MAAM;IACN,SAAS;IACT,YAAY;AACd;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,kUAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kUAAQ,EAAC;IAEvC,IAAA,mUAAS;kCAAC;YACR,IAAI,CAAC,IAAA,qLAAe,KAAI;gBACtB,QAAQ,IAAI,CAAC;gBACb,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,MAAM,OAAO,IAAA,qLAAe;gBAC5B,IAAI,CAAC,MAAM;oBACT,QAAQ,IAAI,CAAC;oBACb,WAAW;oBACX;gBACF;gBAEA,MAAM,cAAc,IAAA,uUAAkB,EAAC;0DAAM,CAAC;wBAC5C,QAAQ;wBACR,WAAW;oBACb;;gBAEA;8CAAO,IAAM;;YACf,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,WAAW;YACb;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ;QACZ;QACA;QACA,YAAY,CAAC,CAAC;IAChB;IAEA,qBACE,sVAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;GA1CgB;KAAA;AA4CT,SAAS;;IACd,MAAM,UAAU,IAAA,oUAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}}]
}